[gd_scene load_steps=10 format=3 uid="uid://4752ypdpysie"]

[ext_resource type="TileSet" uid="uid://cbvev7gaowfc5" path="res://assets/resources/tile/tile_set.tres" id="1_k1gws"]
[ext_resource type="PackedScene" uid="uid://botoclc4ll3ru" path="res://objects/player.tscn" id="2_w7ivg"]
[ext_resource type="Texture2D" uid="uid://r7v6vbrxav0q" path="res://assets/sprites/tile/crate.png" id="3_m4cjh"]

[sub_resource type="GDScript" id="GDScript_aq0wa"]
resource_name = "rotator"
script/source = "extends TileMap

var time = 0.0
# Called when the node enters the scene tree for the first time.
func _ready():
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	#rotation = sin(time*0.53432+43927)*0.02
	#global_position.y = sin(time)*300.0
	time += delta
"

[sub_resource type="Curve2D" id="Curve2D_xrgwp"]
_data = {
"points": PackedVector2Array(-36.48, 76.8886, 36.48, -76.8886, 864, -280, -84.1847, 10.1022, 84.1847, -10.1022, 1024, -440, -80.8173, -34.2351, 80.8173, 34.2351, 1256, -456, 49.3883, -42.6536, -49.3883, 42.6536, 1360, -256, 90.3582, -16.8369, -90.3582, 16.8369, 1240, -160, 55.5619, 13.4695, -55.5619, -13.4695, 992, -136, 19.0819, 37.0412, -19.0819, -37.0412, 888, -168, -31.4289, 67.909, 31.4289, -67.909, 864, -280)
}
point_count = 8

[sub_resource type="GDScript" id="GDScript_yg4a5"]
resource_name = "pather"
script/source = "extends PathFollow2D


# Called when the node enters the scene tree for the first time.
func _ready():
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	progress += delta*50.0
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_3jqsc"]
size = Vector2(64, 64)

[sub_resource type="GDScript" id="GDScript_w3hjr"]
script/source = "extends Node2D
@onready var shape_cast = $ShapeCast2D
@onready var sprite = $Sprite2D


func _process(_delta):
	var frac = shape_cast.get_closest_collision_safe_fraction()
	var pos = global_position.lerp(shape_cast.target_position*shape_cast.global_transform.inverse(), frac)
	sprite.global_position = pos
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_knykj"]
size = Vector2(32, 32)

[node name="TestScene" type="Node2D"]

[node name="TileMap" type="TileMap" parent="."]
process_priority = 1
process_physics_priority = 1
z_index = 10
tile_set = ExtResource("1_k1gws")
format = 2
layer_0/tile_data = PackedInt32Array(0, 3, 0, 65536, 3, 0, 65537, 3, 0, 65538, 3, 0, 1, 3, 0, 2, 3, 0, 3, 3, 0, 65540, 3, 0, 65539, 3, 0, 65541, 3, 0, 5, 3, 0, 6, 3, 0, 4, 3, 0, 65535, 3, 0, 131071, 3, 0, 131070, 3, 0, 65534, 3, 0, 65542, 3, 0, 65543, 3, 0, 65544, 3, 0, 8, 3, 0, 7, 3, 0, 9, 3, 0, 10, 3, 0, 11, 3, 0, 65547, 3, 0, 65546, 3, 0, 65545, 3, 0, 131082, 3, 0, 131083, 3, 0, 131081, 3, 0, 131080, 3, 0, 131079, 3, 0, 131078, 3, 0, 131077, 3, 0, 131076, 3, 0, 131075, 3, 0, 131074, 3, 0, 131073, 3, 0, 131072, 3, 0, 196607, 3, 0, 196606, 3, 0, 196605, 3, 0, 131068, 3, 0, 196604, 3, 0, 196603, 3, 0, 131067, 3, 0, 65531, 3, 0, 65532, 3, 0, 65533, 3, 0, 131069, 3, 0, 14, 3, 0, 65550, 3, 0, 131086, 3, 0, 131087, 3, 0, 65551, 3, 0, 15, 3, 0, 65552, 3, 0, 131088, 3, 0, 16, 3, 0, -65521, 3, 0, -65520, 3, 0, -65519, 3, 0, 17, 3, 0, 65553, 3, 0, 131089, 3, 0, 131090, 3, 0, 131091, 3, 0, 131092, 3, 0, 131093, 3, 0, 65557, 3, 0, 65558, 3, 0, 21, 3, 0, 20, 3, 0, 19, 3, 0, 18, 3, 0, -65518, 3, 0, -65517, 3, 0, -65516, 3, 0, -65515, 3, 0, -65514, 3, 0, 22, 3, 0, 131094, 3, 0, 65555, 3, 0, 65554, 3, 0, 65556, 3, 0, 65562, 3, 0, 65563, 3, 0, 131099, 3, 0, 131098, 3, 0, 30, 3, 0, 65566, 3, 0, 131102, 3, 0, 65567, 3, 0, 31, 3, 0, 131103, 3, 0, 131104, 3, 0, 65568, 3, 0, 32, 3, 0, 131105, 3, 0, 65569, 3, 0, 33, 3, 0, -65503, 3, 0, -131039, 3, 0, -131040, 3, 0, -196575, 3, 0, -262111, 3, 0, -262112, 3, 0, -327647, 3, 0, -393183, 3, 0, -393184, 3, 0, -458719, 3, 0, -524255, 3, 0, -589791, 3, 0, -655327, 3, 0, -655328, 3, 0, -655326, 3, 0, -655325, 3, 0, -655324, 3, 0, -655323, 3, 0, -655322, 3, 0, -655321, 3, 0, -589786, 3, 0, -589787, 3, 0, -589788, 3, 0, -589789, 3, 0, -589790, 3, 0, -524254, 3, 0, -458718, 3, 0, -458717, 3, 0, -524253, 3, 0, -524252, 3, 0, -524251, 3, 0, -393182, 3, 0, -196563, 3, 0, -131027, 3, 0, -65491, 3, 0, -196562, 3, 0, -131026, 3, 0, -65490, 3, 0, -131025, 3, 0, -196561, 3, 0, -65489, 3, 0, -65488, 3, 0, -131024, 3, 0, -196560, 3, 0, -524250, 3, 0, -524249, 3, 0, -458714, 3, 0, -393178, 3, 0, -393177, 3, 0, -458715, 3, 0, -458716, 3, 0, -393181, 3, 0, -393180, 3, 0, -393179, 3, 0, -327643, 3, 0, -327644, 3, 0, -327645, 3, 0, -327646, 3, 0, -327642, 3, 0, -262106, 3, 0, -262105, 3, 0, -262107, 3, 0, -262108, 3, 0, -262109, 3, 0, -262110, 3, 0, -196574, 3, 0, -196573, 3, 0, -196572, 3, 0, -196571, 3, 0, -196570, 3, 0, -131034, 3, 0, -131033, 3, 0, -131035, 3, 0, -131036, 3, 0, -131037, 3, 0, -131038, 3, 0, -65534, 3, 0, -131070, 3, 0, -131068, 3, 0, -131069, 3, 0, -65533, 3, 0, -131067, 3, 0, -65532, 3, 0, -65531, 3, 0, -131066, 3, 0, -65530, 3, 0, -196604, 3, 0, -262140, 3, 0, -327676, 3, 0, -393212, 3, 0, -393211, 3, 0, -327675, 3, 0, -262139, 3, 0, -196603, 3, 0, -196602, 3, 0, -262138, 3, 0, -393210, 3, 0, 196602, 3, 0, 196601, 3, 0, 196600, 3, 0, 131064, 3, 0, 131065, 3, 0, 65529, 3, 0, 65530, 3, 0, 131066, 3, 0, 131063, 3, 0, 65527, 3, 0, 65528, 3, 0, 131062, 3, 0, 196598, 3, 0, 196599, 3, 0, 65526, 3, 0, -10, 3, 0, -65546, 3, 0, -65545, 3, 0, -131081, 3, 0, -196617, 3, 0, -262153, 3, 0, -327689, 3, 0, -393225, 3, 0, -458761, 3, 0, -327690, 3, 0, -262154, 3, 0, -196618, 3, 0, -131082, 3, 0, -9, 3, 0, -393226, 3, 0, -458762, 3, 0, -524298, 3, 0, -589834, 3, 0, -655370, 3, 0, -655369, 3, 0, -589833, 3, 0, -524297, 3, 0, -720906, 3, 0, -786442, 3, 0, -851978, 3, 0, -917514, 3, 0, -983050, 3, 0, -983049, 3, 0, -917513, 3, 0, -720905, 3, 0, -851977, 3, 0, -786441, 3, 0, -65504, 3, 0, -196576, 3, 0, -524256, 3, 0, -65535, 0, 65536, -131071, 0, 65536, -65536, 0, 65536, -196607, 0, 65536, -196606, 0, 65536, -196605, 0, 65536, -131072, 0, 65536, -1, 0, 65536, -65526, 0, 65536, -196556, 3, 0, -131020, 3, 0, -131019, 3, 0, -65483, 3, 0, 53, 3, 0, 52, 3, 0, -65484, 3, 0, -196555, 3, 0, -196554, 3, 0, -196553, 3, 0, -131017, 3, 0, -65481, 3, 0, -65482, 3, 0, 54, 3, 0, -131018, 3, 0, 55, 3, 0, -65480, 3, 0, -131016, 3, 0, -196552, 3, 0, 56, 3, 0, -262084, 3, 0, -196548, 3, 0, -131012, 3, 0, -65476, 3, 0, 60, 3, 0, -262083, 3, 0, -196547, 3, 0, -131011, 3, 0, -65475, 3, 0, 61, 3, 0, -262082, 3, 0, -196546, 3, 0, -131010, 3, 0, -65474, 3, 0, 62, 3, 0, -262081, 3, 0, -196545, 3, 0, -131009, 3, 0, -65473, 3, 0, 63, 3, 0, -458692, 3, 0, -393156, 3, 0, -327620, 3, 0, -458691, 3, 0, -393155, 3, 0, -327619, 3, 0, -458690, 3, 0, -393154, 3, 0, -327618, 3, 0, -458689, 3, 0, -393153, 3, 0, -327617, 3, 0, -720834, 3, 0, -655298, 3, 0, -589762, 3, 0, -524226, 3, 0, -720833, 3, 0, -655297, 3, 0, -589761, 3, 0, -524225, 3, 0, -917447, 3, 0, -851911, 3, 0, -786375, 3, 0, -917446, 3, 0, -851910, 3, 0, -786374, 3, 0, -917445, 3, 0, -851909, 3, 0, -786373, 3, 0, -917444, 3, 0, -851908, 3, 0, -786372, 3, 0, -1179593, 3, 0, -1114057, 3, 0, -1048521, 3, 0, -982985, 3, 0, -917449, 3, 0, -1179592, 3, 0, -1114056, 3, 0, -1048520, 3, 0, -982984, 3, 0, -917448, 3, 0, -1310665, 3, 0, -1245129, 3, 0, -1310664, 3, 0, -1441733, 3, 0, -1310661, 3, 0, -1245125, 3, 0, -1179589, 3, 0, -1114053, 3, 0, -1441732, 3, 0, -1376196, 3, 0, -1310660, 3, 0, -1245124, 3, 0, -1179588, 3, 0, -1114052, 3, 0, -1638345, 3, 0, -1572809, 3, 0, -1507273, 3, 0, -1441737, 3, 0, -1376201, 3, 0, -1638344, 3, 0, -1572808, 3, 0, -1441736, 3, 0, -1376200, 3, 0, -1572805, 3, 0, -1507269, 3, 0, -1572804, 3, 0, -1507268, 3, 0, -1114048, 3, 0, -1048512, 3, 0, -982976, 3, 0, -917440, 3, 0, -851904, 3, 0, -786368, 3, 0, -720832, 3, 0, -655296, 3, 0, -589760, 3, 0, -524224, 3, 0, -458688, 3, 0, -393152, 3, 0, -327616, 3, 0, -1114047, 3, 0, -1048511, 3, 0, -982975, 3, 0, -917439, 3, 0, -851903, 3, 0, -786367, 3, 0, -720831, 3, 0, -655295, 3, 0, -589759, 3, 0, -524223, 3, 0, -458687, 3, 0, -393151, 3, 0, -327615, 3, 0, -1114046, 3, 0, -1048510, 3, 0, -982974, 3, 0, -917438, 3, 0, -851902, 3, 0, -786366, 3, 0, -720830, 3, 0, -655294, 3, 0, -589758, 3, 0, -524222, 3, 0, -458686, 3, 0, -393150, 3, 0, -327614, 3, 0, -262080, 3, 0, -196544, 3, 0, -131008, 3, 0, -65472, 3, 0, 64, 3, 0, -262079, 3, 0, -196543, 3, 0, -131007, 3, 0, -65471, 3, 0, 65, 3, 0, -262078, 3, 0, -196542, 3, 0, -131006, 3, 0, -65470, 3, 0, 66, 3, 0, -2097097, 3, 0, -2031561, 3, 0, -1966025, 3, 0, -1900489, 3, 0, -1834953, 3, 0, -1769417, 3, 0, -1703881, 3, 0, -2097096, 3, 0, -2031560, 3, 0, -1966024, 3, 0, -1900488, 3, 0, -1834952, 3, 0, -1769416, 3, 0, -1703880, 3, 0, -2097095, 3, 0, -2031559, 3, 0, -1966023, 3, 0, -1900487, 3, 0, -1834951, 3, 0, -2097094, 3, 0, -2031558, 3, 0, -1966022, 3, 0, -1900486, 3, 0, -1834950, 3, 0, -2097093, 3, 0, -2031557, 3, 0, -1966021, 3, 0, -1900485, 3, 0, -1834949, 3, 0, -2097092, 3, 0, -2031556, 3, 0, -1966020, 3, 0, -1900484, 3, 0, -1834948, 3, 0, -2097091, 3, 0, -2031555, 3, 0, -1966019, 3, 0, -1900483, 3, 0, -1834947, 3, 0, -2097090, 3, 0, -2031554, 3, 0, -1966018, 3, 0, -1900482, 3, 0, -1834946, 3, 0, -2097089, 3, 0, -2031553, 3, 0, -1966017, 3, 0, -1900481, 3, 0, -1834945, 3, 0, -2097088, 3, 0, -2031552, 3, 0, -1966016, 3, 0, -1900480, 3, 0, -1834944, 3, 0, -2097087, 3, 0, -2031551, 3, 0, -1966015, 3, 0, -1900479, 3, 0, -1834943, 3, 0, -2097086, 3, 0, -2031550, 3, 0, -1966014, 3, 0, -1900478, 3, 0, -1834942, 3, 0, -2097085, 3, 0, -2031549, 3, 0, -1966013, 3, 0, -1900477, 3, 0, -1834941, 3, 0, -2097084, 3, 0, -2031548, 3, 0, -1966012, 3, 0, -1900476, 3, 0, -1834940, 3, 0, -2097083, 3, 0, -2031547, 3, 0, -1966011, 3, 0, -1900475, 3, 0, -1834939, 3, 0, -2097082, 3, 0, -2031546, 3, 0, -1966010, 3, 0, -1900474, 3, 0, -1834938, 3, 0, -2097081, 3, 0, -2031545, 3, 0, -1966009, 3, 0, -1900473, 3, 0, -1834937, 3, 0, -2097080, 3, 0, -2031544, 3, 0, -1966008, 3, 0, -1900472, 3, 0, -1834936, 3, 0, -1572803, 3, 0, -1507267, 3, 0, -1441731, 3, 0, -1376195, 3, 0, -1638338, 3, 0, -1572802, 3, 0, -1507266, 3, 0, -1441730, 3, 0, -1376194, 3, 0, -1638337, 3, 0, -1572801, 3, 0, -1507265, 3, 0, -1441729, 3, 0, -1376193, 3, 0, -1638336, 3, 0, -1572800, 3, 0, -1507264, 3, 0, -1441728, 3, 0, -1376192, 3, 0, -1638335, 3, 0, -1572799, 3, 0, -1507263, 3, 0, -1441727, 3, 0, -1376191, 3, 0, -1638334, 3, 0, -1572798, 3, 0, -1507262, 3, 0, -1441726, 3, 0, -1376190, 3, 0, -1638333, 3, 0, -1572797, 3, 0, -1507261, 3, 0, -1441725, 3, 0, -1376189, 3, 0, -1638332, 3, 0, -1572796, 3, 0, -1507260, 3, 0, -1441724, 3, 0, -1376188, 3, 0, -1638331, 3, 0, -1572795, 3, 0, -1507259, 3, 0, -1441723, 3, 0, -1376187, 3, 0, -1638330, 3, 0, -1572794, 3, 0, -1507258, 3, 0, -1441722, 3, 0, -1376186, 3, 0, -1638329, 3, 0, -1572793, 3, 0, -1507257, 3, 0, -1441721, 3, 0, -1376185, 3, 0, -1638328, 3, 0, -1572792, 3, 0, -1507256, 3, 0, -1441720, 3, 0, -1376184, 3, 0, -1638327, 3, 0, -1572791, 3, 0, -1507255, 3, 0, -1441719, 3, 0, -1376183, 3, 0, -1310659, 3, 0, -1245123, 3, 0, -1179587, 3, 0, -1310658, 3, 0, -1245122, 3, 0, -1179586, 3, 0, -1310657, 3, 0, -1245121, 3, 0, -1179585, 3, 0, -1310656, 3, 0, -1245120, 3, 0, -1179584, 3, 0, -1310655, 3, 0, -1245119, 3, 0, -1179583, 3, 0, -1310654, 3, 0, -1245118, 3, 0, -1179582, 3, 0, -1310653, 3, 0, -1245117, 3, 0, -1179581, 3, 0, -1310652, 3, 0, -1245116, 3, 0, -1179580, 3, 0, -1310651, 3, 0, -1245115, 3, 0, -1179579, 3, 0, -1310650, 3, 0, -1245114, 3, 0, -1179578, 3, 0, -1310649, 3, 0, -1245113, 3, 0, -1179577, 3, 0, -1310648, 3, 0, -1245112, 3, 0, -1179576, 3, 0, -1310647, 3, 0, -1245111, 3, 0, -1179575, 3, 0, -1114051, 3, 0, -1114050, 3, 0, -1114049, 3, 0, -1769409, 0, 65536, -1703873, 0, 65536, -1769408, 0, 65536, -1703872, 0, 65536, -1769407, 0, 65536, -1703871, 0, 65536, -1769406, 0, 65536, -1703870, 0, 65536, -1769405, 0, 65536, -1703869, 0, 65536, -1769404, 0, 65536, -1703868, 0, 65536, -1769403, 0, 65536, -1703867, 0, 65536, -1638339, 3, 0)
script = SubResource("GDScript_aq0wa")

[node name="Player" parent="." instance=ExtResource("2_w7ivg")]
position = Vector2(-160, -64)

[node name="Camera2D" type="Camera2D" parent="Player"]
position_smoothing_speed = 8.0

[node name="Path2D" type="Path2D" parent="."]
curve = SubResource("Curve2D_xrgwp")

[node name="PathFollow2D" type="PathFollow2D" parent="Path2D"]
position = Vector2(864, -280)
rotates = false
script = SubResource("GDScript_yg4a5")

[node name="AnimatableBody2D" type="AnimatableBody2D" parent="Path2D/PathFollow2D"]
collision_layer = 3
sync_to_physics = false

[node name="Sprite2D" type="Sprite2D" parent="Path2D/PathFollow2D/AnimatableBody2D"]
texture = ExtResource("3_m4cjh")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Path2D/PathFollow2D/AnimatableBody2D"]
shape = SubResource("RectangleShape2D_3jqsc")

[node name="Node2D" type="Node2D" parent="."]
visible = false
position = Vector2(1728, -360)
script = SubResource("GDScript_w3hjr")

[node name="ShapeCast2D" type="ShapeCast2D" parent="Node2D"]
visible = false
rotation = 0.785398
shape = SubResource("RectangleShape2D_knykj")
target_position = Vector2(300, 300)
collision_mask = 7

[node name="Sprite2D" type="Sprite2D" parent="Node2D"]
rotation = 0.785398
scale = Vector2(0.5, 0.5)
texture = ExtResource("3_m4cjh")
